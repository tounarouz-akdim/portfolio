<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculateur de pr√™t hypoth√©caire</title>
  <style>
    :root {
      --bg: #f0f4f8;
      --text: #333;
      --primary: #1976d2;
      --accent: #689f38;
      --error: red;
      --card: #fff;
    }

    [data-theme="dark"] {
      --bg: #121212;
      --text: #e0e0e0;
      --primary: #90caf9;
      --accent: #aed581;
      --card: #1e1e1e;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px 20px;
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }

    .calculator {
      background-color: var(--card);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      max-width: 400px;
      width: 100%;
    }

    h1 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 15px;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #fff;
      color: #000;
    }

    button {
      width: 100%;
      padding: 12px;
      background-color: var(--primary);
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    button:hover {
      background-color: #125aa3;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background-color: #f1f8e9;
      border-left: 4px solid var(--accent);
      border-radius: 5px;
      color: var(--accent);
    }

    .error {
      color: var(--error);
      margin-top: 10px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .top-bar button {
      width: auto;
      padding: 8px 12px;
      margin-left: 5px;
    }
  </style>
</head>
<body>
  <div class="calculator">
    <div class="top-bar">
      <div>
        <button onclick="switchTheme()" aria-label="Basculer th√®me clair/sombre">üåô</button>
      </div>
      <div>
        <button onclick="switchLang()" aria-label="Changer la langue">üåê FR/EN</button>
      </div>
    </div>

    <h1 id="title">Calculateur de pr√™t</h1>

    <form id="form" aria-label="Formulaire de calcul" autocomplete="off">
      <label for="montant"><span id="label-montant">Montant du pr√™t (‚Ç¨)</span> :
        <input type="number" id="montant" step="0.01" required aria-required="true" />
      </label>

      <label for="taux"><span id="label-taux">Taux d‚Äôint√©r√™t annuel (%)</span> :
        <input type="number" id="taux" step="0.01" required aria-required="true" />
      </label>

      <label for="duree"><span id="label-duree">Dur√©e du pr√™t (ann√©es)</span> :
        <input type="number" id="duree" required aria-required="true" />
      </label>

      <button type="submit" id="btn-calculer">Calculer</button>
      <p id="error" class="error" role="alert"></p>
    </form>

    <div id="resultat" class="result" style="display: none;" role="status"></div>
  </div>

  <script>
    const elements = {
      title: document.getElementById("title"),
      labelMontant: document.getElementById("label-montant"),
      labelTaux: document.getElementById("label-taux"),
      labelDuree: document.getElementById("label-duree"),
      btnCalculer: document.getElementById("btn-calculer"),
      error: document.getElementById("error"),
      resultat: document.getElementById("resultat")
    };

    const texts = {
      fr: {
        title: "Calculateur de pr√™t",
        montant: "Montant du pr√™t (‚Ç¨)",
        taux: "Taux d‚Äôint√©r√™t annuel (%)",
        duree: "Dur√©e du pr√™t (ann√©es)",
        bouton: "Calculer",
        erreur: "Veuillez entrer des valeurs valides pour tous les champs.",
        mensuel: "Paiement mensuel",
        total: "Montant total rembours√©",
        interets: "Int√©r√™ts totaux pay√©s"
      },
      en: {
        title: "Loan Calculator",
        montant: "Loan Amount (‚Ç¨)",
        taux: "Annual Interest Rate (%)",
        duree: "Loan Term (years)",
        bouton: "Calculate",
        erreur: "Please enter valid values for all fields.",
        mensuel: "Monthly Payment",
        total: "Total Amount Repaid",
        interets: "Total Interest Paid"
      }
    };

    let currentLang = "fr";

    document.getElementById("form").addEventListener("submit", function (event) {
      event.preventDefault();

      const montant = parseFloat(document.getElementById("montant").value);
      const taux = parseFloat(document.getElementById("taux").value);
      const duree = parseInt(document.getElementById("duree").value);
      const t = texts[currentLang];

      elements.error.textContent = "";
      elements.resultat.style.display = "none";
      elements.resultat.innerHTML = "";

      if (isNaN(montant) || isNaN(taux) || isNaN(duree) || montant <= 0 || taux <= 0 || duree <= 0) {
        elements.error.textContent = t.erreur;
        return;
      }

      const r = taux / 100 / 12;
      const n = duree * 12;
      const mensualite = montant * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
      const montantTotal = mensualite * n;
      const interetsTotal = montantTotal - montant;

      elements.resultat.style.display = "block";
      elements.resultat.innerHTML = `
        <strong>${t.mensuel} :</strong> ${mensualite.toFixed(2)} ‚Ç¨<br>
        <strong>${t.total} :</strong> ${montantTotal.toFixed(2)} ‚Ç¨<br>
        <strong>${t.interets} :</strong> ${interetsTotal.toFixed(2)} ‚Ç¨
      `;
    });

    function switchTheme() {
      const html = document.documentElement;
      const current = html.getAttribute("data-theme");
      html.setAttribute("data-theme", current === "dark" ? "light" : "dark");
    }

    function switchLang() {
      currentLang = currentLang === "fr" ? "en" : "fr";
      const t = texts[currentLang];
      elements.title.textContent = t.title;
      elements.labelMontant.textContent = t.montant;
      elements.labelTaux.textContent = t.taux;
      elements.labelDuree.textContent = t.duree;
      elements.btnCalculer.textContent = t.bouton;
      elements.resultat.style.display = "none";
      elements.error.textContent = "";
    }
  </script>
</body>
</html>