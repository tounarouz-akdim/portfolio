
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To-Do List ( Delete 7 Days)</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #dfe9f3, #ffffff);
      padding: 40px 20px;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    @keyframes scrollText {
      0% { transform: translateX(0%) translateY(-50%); }
      100% { transform: translateX(-100%) translateY(-50%); }
    }

    .container {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      margin: 0 auto 40px auto;
      position: relative;
      z-index: 2; 
    }

    h1 {
      text-align: center;
      color: #00bfa6;
      margin-bottom: 20px;
    }

    .input-container {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    input[type="text"], select {
      padding: 10px;
      font-size: 16px;
      border: 2px solid #ddd;
      border-radius: 5px;
      flex: 1 1 40%;
    }

    button {
      background-color: #00bfa6;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #009e8c;
    }

    #daysContainer {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      position: relative;
      z-index: 1; /* sous le header */

    }

    .day-section {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      width: 30%;
      min-width: 180px;
    }

    .day-section h2 {
      text-align: center;
      color: #00e0d0;
      margin-bottom: 15px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      padding: 10px;
      margin-bottom: 10px;
      background-color: #eee;
      border-radius: 5px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      transition: background-color 0.3s ease;
    }

    li.completed {
      text-decoration: line-through;
      background-color: #d1ffd8;
      color: #555;
    }

    .done {
      border-left: 5px solid green;
      background-color: #dfffe0;
    }

    .missed {
      border-left: 5px solid red;
      background-color: #ffe0e0;
    }

    .task-buttons {
      display: flex;
      justify-content: space-between;
    }

    @media (max-width: 768px) {
      .day-section {
        width: 45%;
      }
    }

    @media (max-width: 500px) {
      .day-section {
        width: 100%;
      }
    }

    /* Centrage du dimanche */
    .dimanche {
      margin: 0 auto;
    }

.animated-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  gap: 30px;
  overflow: hidden;
}

.animated-background div {
  font-size: 40px;
  color: rgba(0, 0, 0, 0.05);
  white-space: nowrap;
  animation: scrollText 20s linear infinite;
}

@keyframes scrollText {
  0%   { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

  </style>
</head>
<body>
<div class="animated-background"></div>
  <div class="container">
    <h1>My To-Do List</h1>
    <div class="input-container">
      <input type="text" id="taskInput" placeholder="Ajouter une nouvelle t√¢che..." />
      <select id="daySelect">
        <option value="Lundi">Lundi</option>
        <option value="Mardi">Mardi</option>
        <option value="Mercredi">Mercredi</option>
        <option value="Jeudi">Jeudi</option>
        <option value="Vendredi">Vendredi</option>
        <option value="Samedi">Samedi</option>
        <option value="Dimanche">Dimanche</option>
      </select>
      <button onclick="addTask()">Ajouter</button>
      <button onclick="checkDay()">Fin de Journ√©e</button>
    </div>
  </div>

  <!-- Sections des jours -->
  <div id="daysContainer"></div>


<script>
  const orderedDays = ["Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi", "Dimanche"];

  function addTask() {
    const input = document.getElementById("taskInput");
    const day = document.getElementById("daySelect").value;
    const taskText = input.value.trim();

    if (taskText === "") {
      alert("Veuillez entrer une t√¢che.");
      return;
    }

    const task = {
      text: taskText,
      day: day,
      done: false,
      createdAt: Date.now()  // Ajout date cr√©ation pour gestion 7 jours
    };

    renderTask(task);
    saveTask(task);
    input.value = "";
  }

  function renderTask(task) {
    const daysContainer = document.getElementById("daysContainer");

    let section = document.querySelector(`[data-day="${task.day}"]`);
    if (!section) {
      section = document.createElement("div");
      section.className = "day-section";
      section.setAttribute("data-day", task.day);
      if (task.day === "Dimanche") section.classList.add("dimanche");

      const title = document.createElement("h2");
      title.textContent = task.day;
      section.appendChild(title);

      const ul = document.createElement("ul");
      ul.setAttribute("data-ul-day", task.day);
      section.appendChild(ul);

      insertDaySectionInOrder(section, task.day);
    }

    const ul = section.querySelector("ul");
    const li = document.createElement("li");
    if (task.done) li.classList.add("completed");
    li.setAttribute("data-day", task.day);
    li.setAttribute("data-done", task.done);
    li.setAttribute("data-createdAt", task.createdAt); // Stocker la date aussi dans le DOM

    const span = document.createElement("span");
    span.textContent = task.text;

    const btns = document.createElement("div");
    btns.className = "task-buttons";

    const doneBtn = document.createElement("button");
    doneBtn.textContent = "T√¢che termin√©e ‚úÖ";
    doneBtn.onclick = () => {
      li.classList.toggle("completed");
      li.setAttribute("data-done", li.classList.contains("completed"));
      updateLocalStorage();
    };

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "üóëÔ∏è";
    deleteBtn.onclick = () => {
      li.remove();
      updateLocalStorage();
    };

    btns.appendChild(doneBtn);
    btns.appendChild(deleteBtn);

    li.appendChild(span);
    li.appendChild(btns);
    ul.appendChild(li);
  }

  function insertDaySectionInOrder(section, day) {
    const daysContainer = document.getElementById("daysContainer");
    const index = orderedDays.indexOf(day);
    const existingSections = Array.from(daysContainer.children);

    for (let i = 0; i < existingSections.length; i++) {
      const existingDay = existingSections[i].getAttribute("data-day");
      if (orderedDays.indexOf(existingDay) > index) {
        daysContainer.insertBefore(section, existingSections[i]);
        return;
      }
    }
    daysContainer.appendChild(section);
  }

  function checkDay() {
    const selectedDay = document.getElementById("daySelect").value.toLowerCase();
    const allTasks = document.querySelectorAll("li");

    allTasks.forEach(task => {
      const taskDay = task.getAttribute("data-day").toLowerCase();
      const done = task.getAttribute("data-done") === "true";
      const span = task.querySelector("span");

      // √âvite de retraiter une t√¢che d√©j√† v√©rifi√©e
      if (task.getAttribute("data-checked") === "true") return;

      if (taskDay === selectedDay) {
        if (done) {
          task.classList.add("done");
          if (!span.textContent.startsWith("‚úÖ ")) {
            span.textContent = "‚úÖ " + span.textContent;
          }
        } else {
          task.classList.add("missed");
          if (!span.textContent.startsWith("‚ùå ")) {
            span.textContent = "‚ùå " + span.textContent;
          }
        }
        task.setAttribute("data-checked", "true"); // Marquer comme v√©rifi√©e
      }
    });
  }

  function saveTask(task) {
    const tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    tasks.push(task);
    localStorage.setItem("tasks", JSON.stringify(tasks));
  }

  function loadTasks() {
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");

    // Filtrer les t√¢ches > 7 jours
    const now = Date.now();
    const sevenDaysMs = 7 * 24 * 60 * 60 * 1000;
    tasks = tasks.filter(task => (now - task.createdAt) <= sevenDaysMs);

    // Sauvegarder les t√¢ches filtr√©es
    localStorage.setItem("tasks", JSON.stringify(tasks));

    // Si lundi, ne rien afficher (seulement titre "My To-Do List")
    const todayName = new Date().toLocaleDateString('fr-FR', { weekday: 'long' });
    if (todayName.toLowerCase() === "lundi") {
      return; // Ne pas afficher les t√¢ches
    }

    tasks.forEach(task => renderTask(task));
  }

  function updateLocalStorage() {
    const tasks = [];
    document.querySelectorAll("li").forEach(li => {
      const day = li.getAttribute("data-day");
      const done = li.getAttribute("data-done") === "true";
      const createdAt = parseInt(li.getAttribute("data-createdAt")) || Date.now();
      let text = li.querySelector("span").textContent.replace(/^‚úÖ |^‚ùå /, "");
      tasks.push({ day, done, text, createdAt });
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
  }

  document.addEventListener("DOMContentLoaded", () => {
    loadTasks();
    generateAnimatedLines();
  });

  function generateAnimatedLines() {
    const container = document.querySelector(".animated-background");
    for (let i = 0; i < 10; i++) {
      const line = document.createElement("div");
      line.textContent = "Planifiez votre journ√©e ‚Ä¢ ".repeat(10);
      line.style.animationDelay = `${i * 2}s`;
      container.appendChild(line);
    }
  }

</script>

</body>
</html>